<div class="container index-page">
  <h1 class="visually-hidden"><%= t('activity.title') %></h1>

  <h2><%= t('activity.summary_title') %></h2>

  <!-- Activity summary tabs -->
  <ul class="nav nav-tabs mt-3" id="summary-tabs" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="nav-link active" id="uploads-tab" data-bs-toggle="tab" data-bs-target="#uploads-pane" type="button"
        role="tab" aria-controls="uploads-pane" aria-selected="true">Uploads</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="normalized-data-tab" data-bs-toggle="tab" data-bs-target="#normalized-data-pane"
        type="button" role="tab" aria-controls="normalized-data-pane" aria-selected="false">Normalized data</button>
    </li>
    <% if can? :read, User %>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="users-tab" data-bs-toggle="tab" data-bs-target="#users-pane" type="button" role="tab"
          aria-controls="users-pane" aria-selected="false">Users</button>
      </li>
    <% end %>
  </ul>

  <!-- Activity summary panes (tab content) -->
  <div class="tab-content pt-3" id="summary-tabs-content">
    <!-- Uploads tab - rendered by default, not lazy-loaded -->
    <div id="uploads-pane" class="tab-pane fade show active" role="tabpanel">
      <%= helpers.turbo_frame_tag "uploads_tab", src: activity_uploads_path, loading: "lazy" do %>
        <div class="text-muted">Loading Uploads…</div>
      <% end %>
    </div>

    <!-- Normalized Data tab -->
    <div id="normalized-data-pane" class="tab-pane fade" role="tabpanel">
      <%= helpers.turbo_frame_tag "normalized_data_tab", src: activity_normalized_data_path, loading: "lazy" do %>
        <div class="text-muted">Loading Normalized Data…</div>
      <% end %>
    </div>

    <% if can? :read, User %>
      <!-- Users tab -->
      <div id="users-pane" class="tab-pane fade" role="tabpanel">
        <%= helpers.turbo_frame_tag "users_tab", src: activity_users_path, loading: "lazy" do %>
          <div class="text-muted">Loading Users…</div>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
