<%= render 'shared/layout_upload_page' do %>

  <div class="d-flex align-items-center">
    <h2 class="font-weight-normal mb-0">File: <%= @blob.filename %></h2>

    <div class="ms-auto p-2">
      <% if can? :read, @upload %>
          <%= link_to 'Download', download_url(@attachment), class: 'btn btn-primary' %>
          <%= link_to 'Source ðŸ”—', @upload.url, title: @upload.url, class: 'btn btn-primary' if @upload.url.present? %>
      <% end %>
    </div>
  </div>

  <% if @blob.metadata&.dig('error').present? %>
    <div class="alert alert-warning">
      <%= @blob.metadata['error'] %>
    </div>
  <% end %>

  <%= render 'uploads/summary_card', upload: @upload %>

  <%= turbo_frame_tag 'marc-records', src: organization_upload_attachment_marc_records_path(@upload.organization, @upload, @attachment) %>
<% end %>
